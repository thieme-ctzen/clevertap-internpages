<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Email Generator - Sales Support Portal</title>

  <!-- Fonte / Font: Inter (igual main.html) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Mesmo padr√£o do main.html */
      --bg-page: #FFFFFF;
      --card-bg: #FFFFFF;
      --text-on-bg: #133B58;
      --text-on-card: #133B58;
      --accent: #F04444;

      --header-bg: #102C45;
      --header-border: rgba(255, 255, 255, 0.08);

      --border-soft: rgba(19, 59, 88, 0.12);
      --muted: rgba(19, 59, 88, 0.75);
      --muted-2: rgba(19, 59, 88, 0.60);

      --shadow-card: 0 18px 40px rgba(0, 0, 0, 0.15);
      --shadow-soft: 0 10px 24px rgba(15, 23, 42, 0.08);

      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-pill: 999px;

      --transition-fast: 0.25s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: var(--bg-page);
      color: var(--text-on-bg);
      height: 100vh;
      overflow: hidden;
    }

    /* HEADER (mesmo padr√£o do main) */
    header {
      background: var(--header-bg);
      height: 60px;
      padding: 0 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--header-border);
      position: sticky;
      top: 0;
      z-index: 50;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #ffffff;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.04em;
      white-space: nowrap;
    }

    .logo img {
      height: 40px;
      max-height: 40px;
      width: auto;
      display: block;
    }

    header nav {
      display: flex;
      align-items: center;
    }

    nav a {
      color: #ffffff;
      margin-left: 24px;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      position: relative;
      padding-bottom: 4px;
      opacity: 0.92;
      transition: opacity var(--transition-fast);
    }

    nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      border-radius: 999px;
      background: var(--accent);
      transition: width var(--transition-fast);
    }

    nav a:hover {
      opacity: 1;
    }

    nav a:hover::after {
      width: 100%;
    }

    .top-nav {
      display: flex;
      align-items: center;
    }

    /* Dropdown idiomas */
    .lang-dd {
      margin-left: 22px;
      padding-left: 18px;
      border-left: 1px solid rgba(255,255,255,0.14);
      position: relative;
    }

    .lang-dd-btn {
      appearance: none;
      border: 1px solid rgba(255,255,255,0.24);
      background: rgba(255,255,255,0.06);
      color: #ffffff;
      font-size: 12px;
      font-weight: 700;
      padding: 7px 10px;
      border-radius: 999px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform var(--transition-fast), background var(--transition-fast), border-color var(--transition-fast);
    }

    .lang-dd-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(255,255,255,0.45);
      background: rgba(255,255,255,0.10);
    }

    .lang-dd-menu {
      position: absolute;
      right: 0;
      top: calc(100% + 10px);
      min-width: 120px;
      background: #0E263B;
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 14px;
      padding: 8px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.35);
      display: none;
      z-index: 999;
    }

    .lang-dd.open .lang-dd-menu { display: block; }

    .lang-dd-item {
      width: 100%;
      text-align: left;
      padding: 10px 10px;
      border: 0;
      background: transparent;
      color: #ffffff;
      font-size: 13px;
      font-weight: 600;
      border-radius: 10px;
      cursor: pointer;
      transition: background var(--transition-fast), transform var(--transition-fast);
    }

    .lang-dd-item:hover {
      background: rgba(255,255,255,0.08);
      transform: translateX(2px);
    }

    /* Layout geral */
    .app {
      display: flex;
      height: calc(100vh - 60px);
      overflow: hidden;
    }

    /* SIDEBAR */
    .sidebar {
      width: 360px;
      max-width: 42vw;
      background: #FFFFFF;
      border-right: 1px solid var(--border-soft);
      padding: 18px 18px 18px;
      overflow-y: auto;
    }

    .sidebar-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
    }

    .sidebar-title h2 {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-on-bg);
      letter-spacing: 0.02em;
    }

    .sidebar-title .pill {
      font-size: 11px;
      padding: 5px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(240, 68, 68, 0.35);
      color: var(--accent);
      background: rgba(240, 68, 68, 0.06);
      white-space: nowrap;
    }

    /* Search sticky (fica fixa no topo da sidebar ao scroll) */
    .search-box {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #fff;
      padding: 8px 0 12px;
      border-bottom: 1px solid rgba(19, 59, 88, 0.08);
      margin-bottom: 12px;
    }

    .search-box input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(19, 59, 88, 0.18);
      outline: none;
      font-size: 13px;
      color: var(--text-on-bg);
      background: #fff;
      transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
    }

    .search-box input:focus {
      border-color: rgba(240, 68, 68, 0.6);
      box-shadow: 0 0 0 3px rgba(240, 68, 68, 0.18);
    }

    /* Switch (padr√£o pill do main) */
    .topic-switch {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin: 12px 0 10px;
    }

    .topic-btn {
      flex: 1 1 auto;
      background: #ffffff;
      border: 1px solid rgba(19, 59, 88, 0.22);
      border-radius: var(--radius-pill);
      padding: 7px 10px;
      font-size: 12px;
      cursor: pointer;
      color: rgba(19, 59, 88, 0.85);
      transition: background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast);
      white-space: nowrap;
    }

    .topic-btn:hover {
      box-shadow: 0 0 0 2px rgba(240, 68, 68, 0.12);
      border-color: rgba(240, 68, 68, 0.35);
    }

    .topic-btn.active {
      background: var(--accent);
      color: #fff;
      border-color: rgba(240, 68, 68, 0.8);
      box-shadow: 0 10px 18px rgba(240, 68, 68, 0.22);
    }

    /* Sections (cards no padr√£o do main) */
    .section {
      background: var(--card-bg);
      border: 1px solid var(--border-soft);
      border-radius: 16px;
      box-shadow: var(--shadow-soft);
      padding: 14px;
      margin-top: 14px;
    }

    .section h3 {
      font-size: 13px;
      font-weight: 700;
      color: var(--text-on-bg);
      margin-bottom: 6px;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-icon {
      width: 18px;
      height: 18px;
      border-radius: 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: rgba(19, 59, 88, 0.08);
      border: 1px solid rgba(19, 59, 88, 0.18);
      flex-shrink: 0;
    }

    .section-icon svg {
      width: 12px;
      height: 12px;
      fill: #133B58;
    }

    details {
      margin-top: 10px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(19, 59, 88, 0.10);
      background: #fff;
    }

    summary {
      cursor: pointer;
      font-weight: 600;
      font-size: 13px;
      padding: 10px 12px;
      background: rgba(19, 59, 88, 0.04);
      list-style: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background var(--transition-fast);
    }

    summary:hover {
      background: rgba(240, 68, 68, 0.06);
    }

    summary::after {
      content: "‚ñæ";
      font-size: 12px;
      color: var(--accent);
      transition: transform var(--transition-fast);
      margin-left: 10px;
    }

    details[open] summary::after {
      transform: rotate(180deg);
    }

    .subtopics {
      padding: 10px 12px 12px;
    }

    .subtopics label {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 7px 8px;
      border-radius: 10px;
      font-size: 12.5px;
      color: rgba(19, 59, 88, 0.92);
      cursor: pointer;
      transition: background var(--transition-fast);
    }

    .subtopics label:hover {
      background: rgba(19, 59, 88, 0.04);
    }

    input[type="checkbox"] {
      margin-top: 2px;
      accent-color: var(--accent);
      cursor: pointer;
    }

    /* MAIN */
    .main {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      padding: 18px 22px;
      gap: 14px;
    }

    .main-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
    }

    .page-title {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .page-title h1 {
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 0.01em;
      color: var(--text-on-bg);
    }

    .page-title p {
      font-size: 12.5px;
      color: rgba(19, 59, 88, 0.70);
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .generate-btn {
      background: var(--accent);
      color: #ffffff;
      border: none;
      padding: 10px 14px;
      border-radius: var(--radius-pill);
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 16px 30px rgba(240, 68, 68, 0.35);
      transition: transform var(--transition-fast), box-shadow var(--transition-fast), opacity var(--transition-fast);
      white-space: nowrap;
    }

    .generate-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 24px 50px rgba(240, 68, 68, 0.45);
      opacity: 0.97;
    }

    .generate-btn:active {
      transform: translateY(0);
    }

    /* Output card */
    .email-output {
      flex: 1;
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-card);
      padding: 18px 18px 16px;
      position: relative;
      overflow: auto;
      min-height: 260px;
    }

    #emptyState {
      display: grid;
      place-items: center;
      height: 100%;
      text-align: center;
      color: rgba(19, 59, 88, 0.70);
      padding: 20px;
    }

    #emptyState.hidden {
      display: none;
    }

    .email-meta {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }

    #selectedTopics {
      font-size: 12.5px;
      color: rgba(19, 59, 88, 0.78);
    }

    #emailSubject {
      font-size: 12.5px;
      font-weight: 800;
      color: var(--text-on-bg);
      display: none;
    }

    pre {
      white-space: pre-wrap;
      font-size: 13px;
      line-height: 1.55;
      color: rgba(19, 59, 88, 0.92);
      padding-top: 8px;
      border-top: 1px solid rgba(19, 59, 88, 0.10);
    }

    /* Copy button */
    .copy-btn {
      position: absolute;
      top: 14px;
      right: 14px;
      background: rgba(19, 59, 88, 0.04);
      border: 1px solid rgba(19, 59, 88, 0.18);
      width: 38px;
      height: 38px;
      border-radius: 12px;
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: transform var(--transition-fast), border-color var(--transition-fast), background var(--transition-fast);
    }

    .copy-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(240, 68, 68, 0.35);
      background: rgba(240, 68, 68, 0.06);
    }

    .copy-btn img {
      width: 18px;
      height: 18px;
      display: block;
      filter: invert(15%) sepia(18%) saturate(1094%) hue-rotate(166deg) brightness(92%) contrast(95%);
    }

    /* Popups */
    .copied-popup,
    .style-popup {
      position: absolute;
      top: 14px;
      right: 62px;
      background: #0b1726;
      color: #fff;
      padding: 7px 10px;
      border-radius: 10px;
      font-size: 12px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.35);
      opacity: 0;
      pointer-events: none;
    }

    .style-popup {
      right: auto;
      left: 50%;
      transform: translateX(-50%);
    }

    @keyframes toast {
      0% { opacity: 0; transform: translateY(6px); }
      15% { opacity: 1; transform: translateY(0); }
      85% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-6px); }
    }

    .copied-popup.show,
    .style-popup.show {
      animation: toast 1.6s ease forwards;
    }

    /* Style buttons */
    .email-styles {
      display: none;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    .email-styles.show {
      display: flex;
    }

    .style-btn {
      background: #ffffff;
      border: 1px solid rgba(19, 59, 88, 0.22);
      border-radius: var(--radius-pill);
      padding: 8px 12px;
      cursor: pointer;
      font-size: 12.5px;
      color: rgba(19, 59, 88, 0.85);
      transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .style-btn:hover {
      border-color: rgba(240, 68, 68, 0.35);
      box-shadow: 0 0 0 2px rgba(240, 68, 68, 0.12);
      background: rgba(240, 68, 68, 0.06);
    }

    .style-btn.active {
      background: var(--accent);
      border-color: rgba(240, 68, 68, 0.8);
      color: #fff;
      box-shadow: 0 10px 18px rgba(240, 68, 68, 0.22);
      font-weight: 800;
    }

    /* Contador */
    .selected-count {
      font-size: 12px;
      color: rgba(19, 59, 88, 0.72);
      margin-left: auto;
    }

    /* Responsivo */
    @media (max-width: 900px) {
      header { padding: 0 16px; }
      .app { flex-direction: column; height: calc(100vh - 60px); }
      .sidebar { width: 100%; max-width: none; height: 44vh; border-right: none; border-bottom: 1px solid var(--border-soft); }
      .main { height: 56vh; }
    }
    @media (max-width: 640px) {
      header { padding: 14px 16px; }
      nav a { margin-left: 14px; font-size: 13px; }
      .lang-dd { margin-left: 12px; padding-left: 12px; }
    }
  </style>
</head>

<body>
  <header>
    <div class="logo">
      <img src="https://cdn-public.softwarereviews.com/production/favicons/offerings/8910/original/CleverTap_fav.png" alt="CleverTap logo">
      <span>Sales Support Portal</span>
    </div>

    <nav class="top-nav">
      <a href="index.html" data-i18n="nav.home">Home</a>
      <a href="clever-plans.html" data-i18n="nav.plans">Plan Comparison</a>
      <a href="use-cases-ai.html" data-i18n="nav.usecases">Use Cases</a>

      <div class="lang-dd" id="langDD">
        <button type="button" class="lang-dd-btn" id="langDDBtn" aria-haspopup="true" aria-expanded="false">
          <span id="langDDLabel">ENG</span>
          <span class="lang-dd-caret">‚ñæ</span>
        </button>

        <div class="lang-dd-menu" id="langDDMenu" role="menu" aria-label="Select language">
          <button type="button" class="lang-dd-item" data-lang-select="pt" role="menuitem">PT</button>
          <button type="button" class="lang-dd-item" data-lang-select="en" role="menuitem">ENG</button>
          <button type="button" class="lang-dd-item" data-lang-select="es" role="menuitem">ESP</button>
        </div>
      </div>
    </nav>
  </header>

  <div class="app">
    <aside class="sidebar">
      <div class="sidebar-title">
        <h2 data-i18n="sidebar.title">T√≥picos dispon√≠veis</h2>
        <span class="pill" id="selectedCountPill">0 selecionados</span>
      </div>

      <div class="search-box">
        <input type="text" id="searchInput" placeholder="üîç Buscar t√≥pico..." data-i18n-placeholder="search.placeholder" onkeyup="filterTopics()">
      </div>

      <div class="topic-switch">
        <button class="topic-btn active" data-topic="user-docs" data-i18n="topics.user">Documenta√ß√£o do usu√°rio</button>
        <button class="topic-btn" data-topic="tech-docs" data-i18n="topics.tech">Documenta√ß√£o t√©cnica</button>
        <button class="topic-btn" data-topic="partners" data-i18n="topics.partners">Parceiros integrados</button>
      </div>

      <!-- USER DOCS -->
      <div class="section topic-section" data-topic="user-docs">
        <h3 class="section-title" data-i18n="sections.user">
          <span class="section-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M6 3h9l5 5v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm8 1v4h4"></path>
            </svg>
          </span>
          Documenta√ß√£o do Usu√°rio
        </h3>

        <details>
          <summary>Getting Started</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="CleverTap Overview https://docs.clevertap.com/docs/getting-started"> CleverTap Overview</label>
            <label><input type="checkbox" value="Set Up Dashboard https://docs.clevertap.com/docs/getting-started#setup-dashboard"> Set Up Dashboard</label>
            <label><input type="checkbox" value="Onboarding Glossary https://docs.clevertap.com/docs/glossary-2"> Onboarding Glossary</label>
            <label><input type="checkbox" value="Project Setup https://docs.clevertap.com/docs/project-setup"> Project Setup</label>
            <label><input type="checkbox" value="Events https://docs.clevertap.com/docs/events"> Events</label>
            <label><input type="checkbox" value="User Profiles https://docs.clevertap.com/docs/user-profiles"> User Profiles</label>
            <label><input type="checkbox" value="How Profiles merge https://docs.clevertap.com/docs/how-profiles-merge"> How Profiles merge</label>
            <label><input type="checkbox" value="Upload past User Profiles https://docs.clevertap.com/docs/upload-past-user-profiles"> Upload past User Profiles</label>
            <label><input type="checkbox" value="Delete User Profiles https://docs.clevertap.com/docs/delete-user-profile"> Delete User Profiles</label>
            <label><input type="checkbox" value="Schema https://docs.clevertap.com/docs/schema"> Schema</label>
            <label><input type="checkbox" value="Composite Events https://docs.clevertap.com/docs/composite-events"> Composite Events</label>
            <label><input type="checkbox" value="Sample Events by Business https://docs.clevertap.com/docs/sample-events-by-business-verticals"> Sample Events by Business</label>
            <label><input type="checkbox" value="Event Design https://docs.clevertap.com/docs/event-design"> Event Design</label>
            <label><input type="checkbox" value="Nested Objects https://docs.clevertap.com/docs/nested-objects"> Nested Objects</label>
            <label><input type="checkbox" value="Manage Users https://docs.clevertap.com/docs/manage-users"> Manage Users</label>
            <label><input type="checkbox" value="Role Based Access Control https://docs.clevertap.com/docs/role-based-access-control"> Role Based Access Control</label>
            <label><input type="checkbox" value="Security & Data Governance https://docs.clevertap.com/docs/security-overview"> Security & Data Governance</label>
            <label><input type="checkbox" value="Session analytics https://docs.clevertap.com/docs/session-analytics"> Session analytics</label>
            <label><input type="checkbox" value="Go Live Checklist https://docs.clevertap.com/docs/go-live-checklist"> Go Live Checklist</label>
            <label><input type="checkbox" value="Calendar Widgets https://docs.clevertap.com/docs/calendar-widgets"> Calendar Widgets</label>
            <label><input type="checkbox" value="Accessibility in CleverTap Messaging https://docs.clevertap.com/docs/creating-accessible-messaging-with-clevertap"> Accessibility in CleverTap Messaging</label>
          </div>
        </details>

        <details>
          <summary>Clever.AI</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Ask https://docs.clevertap.com/docs/clever-ai#ask"> Ask</label>
            <label><input type="checkbox" value="Scribe https://docs.clevertap.com/docs/clever-ai#scribe"> Scribe</label>
            <label><input type="checkbox" value="Generate message copy with Scribe https://docs.clevertap.com/docs/generate-message-copy-with-scribe"> Generate message copy with Scribe</label>
            <label><input type="checkbox" value="Scribe FAQs https://docs.clevertap.com/docs/scribe-faqs"> Scribe FAQs</label>
            <label><input type="checkbox" value="IntelliNode https://docs.clevertap.com/docs/intellinode"> IntelliNode</label>
            <label><input type="checkbox" value="Recommendations https://docs.clevertap.com/docs/recommendations"> Recommendations</label>
            <label><input type="checkbox" value="Preferred Channel https://docs.clevertap.com/docs/preferred-channel"> Preferred Channel</label>
          </div>
        </details>

        <details>
          <summary>Segmentation</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Find People https://docs.clevertap.com/docs/find-people"> Find People</label>
            <label><input type="checkbox" value="NextGen Segment Builder https://docs.clevertap.com/docs/segmentation"> NextGen Segment Builder</label>
            <label><input type="checkbox" value="Types of Segments https://docs.clevertap.com/docs/types-of-segments"> Types of Segments</label>
            <label><input type="checkbox" value="Segmentation Rules https://docs.clevertap.com/docs/segmentation-rules"> Segmentation Rules</label>
            <label><input type="checkbox" value="Create Segments https://docs.clevertap.com/docs/create-segments"> Create Segments</label>
            <label><input type="checkbox" value="View Segments https://docs.clevertap.com/docs/view-segments"> View Segments</label>
            <label><input type="checkbox" value="Segments Operations https://docs.clevertap.com/docs/segments-operations"> Segments Operations</label>
            <label><input type="checkbox" value="API Segments https://docs.clevertap.com/docs/api-segments"> API Segments</label>
            <label><input type="checkbox" value="RFM Analysis https://docs.clevertap.com/docs/rfm"> RFM Analysis</label>
          </div>
        </details>

        <details>
          <summary>Behavioral Analytics</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Boards https://docs.clevertap.com/docs/simple-reports"> Boards</label>
            <label><input type="checkbox" value="Analyze events https://docs.clevertap.com/docs/events-analytics"> Analyze events</label>
            <label><input type="checkbox" value="Cohorts https://docs.clevertap.com/docs/cohorts"> Cohorts</label>
            <label><input type="checkbox" value="Funnels https://docs.clevertap.com/docs/funnels"> Funnels</label>
            <label><input type="checkbox" value="Trends https://docs.clevertap.com/docs/trends"> Trends</label>
            <label><input type="checkbox" value="Pivots https://docs.clevertap.com/docs/pivots"> Pivots</label>
            <label><input type="checkbox" value="Flows https://docs.clevertap.com/docs/flows"> Flows</label>
            <label><input type="checkbox" value="Real Impact https://docs.clevertap.com/docs/real-impact"> Real Impact</label>
            <label><input type="checkbox" value="Use cases https://docs.clevertap.com/docs/exporting-clevertap-data-for-risk-ratio-analysis"> Use cases</label>
          </div>
        </details>

        <details>
          <summary>Engagement Channels</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Push notification https://docs.clevertap.com/docs/push"> Push notification</label>
            <label><input type="checkbox" value="In-app https://docs.clevertap.com/docs/in-app"> In-app</label>
            <label><input type="checkbox" value="Email https://docs.clevertap.com/docs/email"> Email</label>
            <label><input type="checkbox" value="Web Push https://docs.clevertap.com/docs/web-push"> Web Push</label>
            <label><input type="checkbox" value="Web Pop-up https://docs.clevertap.com/docs/web-pop-up"> Web Pop-up</label>
            <label><input type="checkbox" value="Web Exit Intent https://docs.clevertap.com/docs/web-exit-intent-overview"> Web Exit Intent</label>
            <label><input type="checkbox" value="Web native display https://docs.clevertap.com/docs/web-native-display"> Web native display</label>
            <label><input type="checkbox" value="Web inbox https://docs.clevertap.com/docs/web-inbox"> Web inbox</label>
            <label><input type="checkbox" value="App inbox https://docs.clevertap.com/docs/app-inbox"> App inbox</label>
            <label><input type="checkbox" value="Native display https://docs.clevertap.com/docs/native-display"> Native display</label>
            <label><input type="checkbox" value="WhatsApp https://docs.clevertap.com/docs/whatsapp"> WhatsApp</label>
            <label><input type="checkbox" value="SMS https://docs.clevertap.com/docs/sms"> SMS</label>
            <label><input type="checkbox" value="RCS https://docs.clevertap.com/docs/rcs-messages"> RCS</label>
            <label><input type="checkbox" value="Webhooks https://docs.clevertap.com/docs/webhooks-overview"> Webhooks</label>
            <label><input type="checkbox" value="Google Ads https://docs.clevertap.com/docs/google-adwords"> Google Ads</label>
            <label><input type="checkbox" value="Facebook Audience https://docs.clevertap.com/docs/facebook-audiences"> Facebook Audience</label>
            <label><input type="checkbox" value="Tiktok Remarketing https://docs.clevertap.com/docs/tiktok-remarketing"> Tiktok Remarketing</label>
            <label><input type="checkbox" value="Amazon EventBridge https://docs.clevertap.com/docs/amazon-eventbridge-overview"> Amazon EventBridge</label>
            <label><input type="checkbox" value="Segment https://docs.clevertap.com/docs/segment-overview"> Segment</label>
            <label><input type="checkbox" value="mParticle https://docs.clevertap.com/docs/mparticle"> mParticle</label>
          </div>
        </details>

        <details>
          <summary>Content Manager</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Content Manager https://docs.clevertap.com/docs/content-manager"> Content Manager</label>
            <label><input type="checkbox" value="Content Manager Files https://docs.clevertap.com/docs/content-manager-files"> Content Manager Files</label>
            <label><input type="checkbox" value="Image specifications https://docs.clevertap.com/docs/image-specifications"> Image specifications</label>
            <label><input type="checkbox" value="Content Manager templates https://docs.clevertap.com/docs/content-manager-templates"> Content Manager templates</label>
            <label><input type="checkbox" value="Content blocks - Standardize messaging https://docs.clevertap.com/docs/content-blocks"> Content blocks - Standardize messaging</label>
          </div>
        </details>

        <details>
          <summary>Hyper Personalization</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Personalize Message https://docs.clevertap.com/docs/personalize-message-all"> Personalize Message</label>
            <label><input type="checkbox" value="Recommendations https://docs.clevertap.com/docs/recommendations"> Recommendations</label>
            <label><input type="checkbox" value="Catalogs https://docs.clevertap.com/docs/catalog"> Catalogs</label>
            <label><input type="checkbox" value="Bulletins https://docs.clevertap.com/docs/bulletins"> Bulletins</label>
            <label><input type="checkbox" value="External Trigger https://docs.clevertap.com/docs/external-trigger"> External Trigger</label>
            <label><input type="checkbox" value="Comprehensive guide to engage with users https://docs.clevertap.com/docs/comprehensive-guide-to-engage-with-users"> Comprehensive guide to engage with users</label>
            <label><input type="checkbox" value="Reminders https://docs.clevertap.com/docs/reminders"> Reminders</label>
          </div>
        </details>

        <details>
          <summary>Campaigns</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Campaigns Overview https://docs.clevertap.com/docs/intro-to-campaigns"> Campaigns Overview</label>
            <label><input type="checkbox" value="Notification Delivery Options https://docs.clevertap.com/docs/notification-delivery-options"> Notification Delivery Options</label>
            <label><input type="checkbox" value="Campaign approval Workflow https://docs.clevertap.com/docs/campaign-approval-workflow"> Campaign approval Workflow</label>
            <label><input type="checkbox" value="Campaign Reports https://docs.clevertap.com/docs/campaign-reports"> Campaign Reports</label>
            <label><input type="checkbox" value="Control Groups https://docs.clevertap.com/docs/control-groups"> Control Groups</label>
            <label><input type="checkbox" value="Advanced Capabilities https://docs.clevertap.com/docs/ab-multivariate-testing"> Advanced Capabilities</label>
          </div>
        </details>
      </div>

      <!-- TECH DOCS -->
      <div class="section topic-section" data-topic="tech-docs" style="display:none;">
        <h3 class="section-title" data-i18n="sections.tech">
          <span class="section-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M14.7 6.3a5 5 0 0 0 3.9 7.4l-2.1 2.1a3 3 0 0 1-4.2 0l-4.8 4.8a2 2 0 0 1-2.8-2.8l4.8-4.8a3 3 0 0 1 0-4.2l2.1-2.1a5 5 0 0 0 3.1-.4z"></path>
            </svg>
          </span>
          Documenta√ß√£o T√©cnica
        </h3>

        <details>
          <summary>APIs e SDKs</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="REST API Overview https://docs.clevertap.com/docs/rest-api"> REST API Overview</label>
            <label><input type="checkbox" value="Android SDK https://docs.clevertap.com/docs/android"> Android SDK</label>
            <label><input type="checkbox" value="iOS SDK https://docs.clevertap.com/docs/ios"> iOS SDK</label>
            <label><input type="checkbox" value="Web SDK https://docs.clevertap.com/docs/web"> Web SDK</label>
          </div>
        </details>

        <details>
          <summary>Data Pipelines & Export</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Data Export https://docs.clevertap.com/docs/data-exports"> Data Export</label>
            <label><input type="checkbox" value="S3 / BigQuery / Snowflake https://docs.clevertap.com/docs/integrations"> Cloud Storage Integrations</label>
          </div>
        </details>
      </div>

      <!-- PARTNERS -->
      <div class="section topic-section" data-topic="partners" style="display:none;">
        <h3 class="section-title" data-i18n="sections.partners">
          <span class="section-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M8.5 12.5l2 2 3-3 4 4-2 2-2-2-3 3-4-4-2 2-2-2 4-4z"></path>
            </svg>
          </span>
          Parceiros integrados
        </h3>

        <details>
          <summary>CDPs & Dados</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="Segment Integration https://docs.clevertap.com/docs/segment"> Segment</label>
            <label><input type="checkbox" value="mParticle Integration https://docs.clevertap.com/docs/mparticle"> mParticle</label>
          </div>
        </details>

        <details>
          <summary>Canal & Mensageria</summary>
          <div class="subtopics">
            <label><input type="checkbox" value="WhatsApp BSP Partners https://docs.clevertap.com/docs/whatsapp"> WhatsApp BSPs</label>
            <label><input type="checkbox" value="Email Providers https://docs.clevertap.com/docs/email"> Email Providers</label>
          </div>
        </details>
      </div>
    </aside>

    <main class="main">
      <div class="main-top">
        <div class="page-title">
          <h1 data-i18n="page.title">Gerador de e-mails</h1>
          <p data-i18n="page.subtitle">Selecione t√≥picos √† esquerda e gere um e-mail padronizado em segundos.</p>
        </div>

        <div class="actions">
          <button class="generate-btn" type="button" data-i18n="actions.generate" onclick="generateEmail()">Gerar e-mail</button>
        </div>
      </div>

      <section class="email-output" id="emailOutput" aria-live="polite">
        <div class="copied-popup" id="copiedPopup" data-i18n="toast.copied">Copiado!</div>
        <div class="style-popup" id="stylePopup" data-i18n="toast.styleApplied">Modelo aplicado</div>

        <button class="copy-btn" type="button" onclick="copyEmail()" aria-label="Copiar texto do e-mail">
          <img src="https://cdn-icons-png.flaticon.com/512/4837/4837299.png" alt="">
        </button>

        <div id="emptyState">
          <div>
            <div style="font-weight:800; font-size:14px; color:#133B58;" data-i18n="empty.title">Sem e-mail gerado ainda</div>
            <div style="margin-top:6px; font-size:12.5px;" data-i18n="empty.subtitle">Selecione t√≥picos e clique em <b>Gerar e-mail</b>.</div>
          </div>
        </div>

        <div class="email-meta">
          <div>
            <div id="selectedTopics"></div>
            <div id="emailSubject"></div>
          </div>
        </div>

        <pre id="emailText"></pre>

        <div class="email-styles" id="styleButtons">
          <button class="style-btn" data-style="technical" data-i18n="styles.technical" onclick="applyStyle('technical')">T√©cnico</button>
          <button class="style-btn" data-style="casual" data-i18n="styles.casual" onclick="applyStyle('casual')">Casual</button>
          <button class="style-btn" data-style="creative" data-i18n="styles.creative" onclick="applyStyle('creative')">Criativo</button>
          <button class="style-btn" data-style="professional" data-i18n="styles.professional" onclick="applyStyle('professional')">Profissional</button>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Estado global
    let selectedTopicsData = [];
    let currentStyle = "default"; // default, technical, casual, creative, professional
    let currentLang = "en";       // pt, en, es

    const emailTexts = {
      pt: {
        selectedLabel: "T√≥picos inclu√≠dos",
        intros: {
          default: "Ol√°,\n\nConforme comentei anteriormente, segue a documenta√ß√£o referente aos t√≥picos selecionados:\n",
          technical: "Ol√°,\n\nConforme alinhamos, abaixo envio a documenta√ß√£o t√©cnica referente aos pontos discutidos:\n",
          casual: "Oi,\n\nComo combinado, aqui v√£o os links que comentei sobre a CleverTap:\n",
          creative: "Ol√°,\n\nPreparei um compilado de materiais para explorar melhor a CleverTap. Seguem os principais:\n",
          professional: "Prezados,\n\nConforme alinhado, encaminho abaixo a documenta√ß√£o referente aos t√≥picos discutidos:\n"
        },
        closings: {
          default: "\n\nObrigado e que tenha um excelente dia.",
          technical: "\n\nQualquer d√∫vida mais t√©cnica ou necessidade de aprofundar em algum t√≥pico, fico √† disposi√ß√£o.",
          casual: "\n\nSe surgir qualquer d√∫vida ou quiser ver isso na pr√°tica, √© s√≥ me chamar üòä",
          creative: "\n\nFico √† disposi√ß√£o para explorarmos juntos novos casos de uso e ideias.",
          professional: "\n\nPermane√ßo √† disposi√ß√£o para quaisquer esclarecimentos adicionais."
        },
        subjects: {
          default: "Documenta√ß√£o CleverTap ‚Äì t√≥picos combinados",
          technical: "Documenta√ß√£o t√©cnica CleverTap ‚Äì materiais de refer√™ncia",
          casual: "Links da documenta√ß√£o CleverTap que combinamos",
          creative: "Material para explorar melhor a CleverTap",
          professional: "Documenta√ß√£o CleverTap ‚Äì resumo dos t√≥picos discutidos"
        }
      },
      en: {
        selectedLabel: "Included topics",
        intros: {
          default: "Hi,\n\nAs mentioned earlier, I‚Äôm sharing the documentation for the topics we discussed:\n",
          technical: "Hi,\n\nAs agreed, please find below the technical documentation related to the points we covered:\n",
          casual: "Hey,\n\nAs promised, here are the links I mentioned about CleverTap:\n",
          creative: "Hi,\n\nI‚Äôve put together a curated list of resources so you can explore CleverTap in more detail. Here are the main ones:\n",
          professional: "Dear all,\n\nAs discussed, please find below the documentation for the topics we covered:\n"
        },
        closings: {
          default: "\n\nThank you and have a great day.",
          technical: "\n\nIf you need to go deeper into any of these topics, I‚Äôll be happy to help.",
          casual: "\n\nIf you have any questions or want to see this in action, just ping me üòä",
          creative: "\n\nI‚Äôm available if you‚Äôd like to explore new use cases and ideas together.",
          professional: "\n\nPlease let me know if you need any additional clarification."
        },
        subjects: {
          default: "CleverTap documentation ‚Äì agreed topics",
          technical: "CleverTap technical documentation ‚Äì reference materials",
          casual: "CleverTap docs links we talked about",
          creative: "Resources to better explore CleverTap",
          professional: "CleverTap documentation ‚Äì summary of discussed topics"
        }
      },
      es: {
        selectedLabel: "T√≥picos incluidos",
        intros: {
          default: "Hola,\n\nComo coment√© anteriormente, comparto la documentaci√≥n relacionada con los temas que revisamos:\n",
          technical: "Hola,\n\nSeg√∫n lo acordado, a continuaci√≥n env√≠o la documentaci√≥n t√©cnica relacionada con los puntos tratados:\n",
          casual: "Hola,\n\nComo promet√≠, aqu√≠ van los enlaces que mencion√© sobre CleverTap:\n",
          creative: "Hola,\n\nPrepar√© un conjunto de recursos para que puedas explorar mejor CleverTap. Estos son los principales:\n",
          professional: "Estimados,\n\nTal como conversamos, a continuaci√≥n comparto la documentaci√≥n de los temas tratados:\n"
        },
        closings: {
          default: "\n\nMuchas gracias y que tengas un excelente d√≠a.",
          technical: "\n\nSi necesitan profundizar en alguno de estos puntos, quedo a su disposici√≥n.",
          casual: "\n\nSi tienes alguna duda o quieres verlo en vivo, solo av√≠same üòä",
          creative: "\n\nQuedo atento para que podamos explorar juntos nuevos casos de uso e ideas.",
          professional: "\n\nQuedo a disposici√≥n para cualquier aclaraci√≥n adicional."
        },
        subjects: {
          default: "Documentaci√≥n de CleverTap ‚Äì temas acordados",
          technical: "Documentaci√≥n t√©cnica de CleverTap ‚Äì materiales de referencia",
          casual: "Enlaces de documentaci√≥n de CleverTap que comentamos",
          creative: "Material para explorar mejor CleverTap",
          professional: "Documentaci√≥n de CleverTap ‚Äì resumen de los temas tratados"
        }
      }
    };

    const uiTexts = {
      pt: {
        'nav.home': 'Home',
        'nav.plans': 'Comparativo de planos',
        'nav.usecases': 'Use Cases',
        'sidebar.title': 'T√≥picos dispon√≠veis',
        'search.placeholder': 'üîç Buscar t√≥pico...',
        'topics.user': 'Documenta√ß√£o do usu√°rio',
        'topics.tech': 'Documenta√ß√£o t√©cnica',
        'topics.partners': 'Parceiros integrados',
        'sections.user': 'üìÑ Documenta√ß√£o do Usu√°rio',
        'sections.tech': 'üõ†Ô∏è Documenta√ß√£o T√©cnica',
        'sections.partners': 'ü§ù Parceiros integrados',
        'page.title': 'Gerador de e-mails',
        'page.subtitle': 'Selecione t√≥picos √† esquerda e gere um e-mail padronizado em segundos.',
        'actions.generate': 'Gerar e-mail',
        'toast.copied': 'Copiado!',
        'toast.styleApplied': 'Modelo aplicado',
        'empty.title': 'Sem e-mail gerado ainda',
        'empty.subtitle': 'Selecione t√≥picos e clique em <b>Gerar e-mail</b>.',
        'styles.technical': 'T√©cnico',
        'styles.casual': 'Casual',
        'styles.creative': 'Criativo',
        'styles.professional': 'Profissional',
        'selected.count': '{count} selecionados',
        'alert.selectTopic': 'Selecione ao menos um t√≥pico.',
        'popup.styleSelected': 'Modelo {style} selecionado',
        'subject.label': 'Assunto: '
      },
      en: {
        'nav.home': 'Home',
        'nav.plans': 'Plan Comparison',
        'nav.usecases': 'Use Cases',
        'sidebar.title': 'Available topics',
        'search.placeholder': 'üîç Search topic...',
        'topics.user': 'User documentation',
        'topics.tech': 'Technical documentation',
        'topics.partners': 'Integrated partners',
        'sections.user': 'üìÑ User Documentation',
        'sections.tech': 'üõ†Ô∏è Technical Documentation',
        'sections.partners': 'ü§ù Integrated partners',
        'page.title': 'Email generator',
        'page.subtitle': 'Select topics on the left and generate a standardized email in seconds.',
        'actions.generate': 'Generate email',
        'toast.copied': 'Copied!',
        'toast.styleApplied': 'Style applied',
        'empty.title': 'No email generated yet',
        'empty.subtitle': 'Select topics and click <b>Generate email</b>.',
        'styles.technical': 'Technical',
        'styles.casual': 'Casual',
        'styles.creative': 'Creative',
        'styles.professional': 'Professional',
        'selected.count': '{count} selected',
        'alert.selectTopic': 'Select at least one topic.',
        'popup.styleSelected': '{style} style selected',
        'subject.label': 'Subject: '
      },
      es: {
        'nav.home': 'Inicio',
        'nav.plans': 'Comparativo de planes',
        'nav.usecases': 'Use Cases',
        'sidebar.title': 'Temas disponibles',
        'search.placeholder': 'üîç Buscar tema...',
        'topics.user': 'Documentaci√≥n de usuario',
        'topics.tech': 'Documentaci√≥n t√©cnica',
        'topics.partners': 'Socios integrados',
        'sections.user': 'üìÑ Documentaci√≥n de Usuario',
        'sections.tech': 'üõ†Ô∏è Documentaci√≥n T√©cnica',
        'sections.partners': 'ü§ù Socios integrados',
        'page.title': 'Generador de emails',
        'page.subtitle': 'Selecciona temas a la izquierda y genera un email estandarizado en segundos.',
        'actions.generate': 'Generar email',
        'toast.copied': 'Copiado!',
        'toast.styleApplied': 'Modelo aplicado',
        'empty.title': 'Aun no se gener√≥ un email',
        'empty.subtitle': 'Selecciona temas y haz clic en <b>Generar email</b>.',
        'styles.technical': 'Tecnico',
        'styles.casual': 'Casual',
        'styles.creative': 'Creativo',
        'styles.professional': 'Profesional',
        'selected.count': '{count} seleccionados',
        'alert.selectTopic': 'Selecciona al menos un tema.',
        'popup.styleSelected': 'Modelo {style} seleccionado',
        'subject.label': 'Asunto: '
      }
    };

    function applyTranslations() {
      const dict = uiTexts[currentLang] || uiTexts.en;

      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[key]) el.innerHTML = dict[key];
      });

      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (dict[key]) el.setAttribute('placeholder', dict[key]);
      });
    }

    function updateSelectedCount() {
      const count = document.querySelectorAll('input[type="checkbox"]:checked').length;
      const pill = document.getElementById('selectedCountPill');
      const txt = document.getElementById('selectedCountText');
      const dict = uiTexts[currentLang] || uiTexts.en;
      const label = (dict['selected.count'] || '{count} selected').replace('{count}', count);
      if (pill) pill.textContent = label;
      if (txt) txt.textContent = label;
    }

    document.addEventListener('change', (e) => {
      if (e.target && e.target.matches('input[type="checkbox"]')) updateSelectedCount();
    });

    function filterTopics() {
      const input = document.getElementById("searchInput").value.toLowerCase();
      const details = document.querySelectorAll("details");

      details.forEach(section => {
        let match = false;
        const labels = section.querySelectorAll("label");

        labels.forEach(label => {
          const text = label.textContent.toLowerCase();
          label.style.display = text.includes(input) ? "flex" : "none";
          if (text.includes(input)) match = true;
        });

        const summaryText = section.querySelector("summary").textContent.toLowerCase();
        section.style.display = (match || summaryText.includes(input)) ? "block" : "none";
      });
    }

    function generateEmail() {
      const selectedCheckboxes = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'));
      if (selectedCheckboxes.length === 0) {
        const dict = uiTexts[currentLang] || uiTexts.en;
        alert(dict['alert.selectTopic'] || 'Select at least one topic.');
        return;
      }

      const empty = document.getElementById('emptyState');
      if (empty) empty.classList.add('hidden');

      selectedTopicsData = selectedCheckboxes.map(item => {
        const labelText = item.parentElement.textContent.trim();
        const raw = item.value || "";

        let title;
        let url;

        const httpIndex = raw.indexOf("http");
        if (httpIndex !== -1) {
          title = raw.slice(0, httpIndex).replace(/[:\-‚Äì]+$/,'').trim();
          url = raw.slice(httpIndex).trim();
        } else {
          const parts = raw.split(':');
          title = (parts.shift() || labelText).trim();
          url = parts.join(':').trim();
        }

        return { label: labelText, title, url };
      });

      currentStyle = "default";

      const styles = document.getElementById('styleButtons');
      styles.classList.add('show');

      // Reset active style buttons
      document.querySelectorAll('.style-btn').forEach(b => b.classList.remove('active'));

      updateSelectedTopicsLabel();
      renderEmail();
    }

    function updateSelectedTopicsLabel() {
      if (!selectedTopicsData.length) return;
      const texts = emailTexts[currentLang];
      const label = texts.selectedLabel;
      const selectedNames = selectedTopicsData.map(t => t.label).join(', ');
      const el = document.getElementById('selectedTopics');
      el.textContent = label + ": " + selectedNames;
    }

    function renderEmail() {
      if (!selectedTopicsData.length) return;
      const body = buildEmailBody();
      const subject = buildEmailSubject();

      const textEl = document.getElementById('emailText');
      const subjectEl = document.getElementById('emailSubject');

      textEl.textContent = body;

      if (subject) {
        const dict = uiTexts[currentLang] || uiTexts.en;
        subjectEl.textContent = (dict['subject.label'] || 'Subject: ') + subject;
        subjectEl.style.display = 'block';
      } else {
        subjectEl.style.display = 'none';
      }
    }

    function buildEmailBody() {
      const langBlock = emailTexts[currentLang] || emailTexts.pt;
      const intro = (langBlock.intros[currentStyle] || langBlock.intros.default);
      const closing = (langBlock.closings[currentStyle] || langBlock.closings.default);

      const lines = selectedTopicsData
        .map(t => t.url ? `‚Ä¢ ${t.title}: ${t.url}` : `‚Ä¢ ${t.title}`)
        .join('\n');

      return intro + "\n" + lines + closing;
    }

    function buildEmailSubject() {
      const langBlock = emailTexts[currentLang] || emailTexts.pt;
      return (langBlock.subjects[currentStyle] || langBlock.subjects.default);
    }

    function copyEmail() {
      const text = document.getElementById('emailText').textContent;
      if (!text) return;

      navigator.clipboard.writeText(text);

      const popup = document.getElementById('copiedPopup');
      popup.classList.add('show');
      setTimeout(() => popup.classList.remove('show'), 1600);
    }

    function applyStyle(type) {
      if (!selectedTopicsData.length) return;

      currentStyle = type || "default";
      renderEmail();

      document.querySelectorAll('.style-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.style === type);
      });

      const popup = document.getElementById('stylePopup');
      const dict = uiTexts[currentLang] || uiTexts.en;
      const styleLabel = dict[`styles.${type}`] || type;
      popup.textContent = (dict['popup.styleSelected'] || 'Style {style} selected').replace('{style}', styleLabel);
      popup.classList.add('show');
      setTimeout(() => popup.classList.remove('show'), 1600);
    }

    function setLanguage(lang) {
      currentLang = lang;
      const langLabelMap = { pt: 'PT', en: 'ENG', es: 'ESP' };
      const label = document.getElementById('langDDLabel');
      if (label) label.textContent = langLabelMap[lang] || 'ENG';

      const langAttr = lang === 'pt' ? 'pt-BR' : (lang === 'en' ? 'en' : 'es');
      document.documentElement.setAttribute('lang', langAttr);

      applyTranslations();
      updateSelectedCount();

      if (selectedTopicsData.length) {
        updateSelectedTopicsLabel();
        renderEmail();
      }
    }

    // Alternar entre Documenta√ß√£o do usu√°rio / t√©cnica / parceiros
    document.querySelectorAll('.topic-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const topic = btn.dataset.topic;

        document.querySelectorAll('.topic-btn').forEach(b => b.classList.toggle('active', b === btn));
        document.querySelectorAll('.topic-section').forEach(section => {
          section.style.display = (section.dataset.topic === topic) ? 'block' : 'none';
        });

        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
          searchInput.value = '';
          filterTopics();
        }
      });
    });

    // init count
    updateSelectedCount();

    // Dropdown idiomas
    const langDD = document.getElementById('langDD');
    const langDDBtn = document.getElementById('langDDBtn');
    const langDDMenu = document.getElementById('langDDMenu');

    function closeLangMenu() {
      if (!langDD) return;
      langDD.classList.remove('open');
      langDDBtn.setAttribute('aria-expanded', 'false');
    }

    function openLangMenu() {
      if (!langDD) return;
      langDD.classList.add('open');
      langDDBtn.setAttribute('aria-expanded', 'true');
      const first = langDD.querySelector('.lang-dd-item');
      if (first) first.focus();
    }

    if (langDD && langDDBtn && langDDMenu) {
      langDDBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        langDD.classList.contains('open') ? closeLangMenu() : openLangMenu();
      });

      langDDMenu.addEventListener('click', (e) => {
        const item = e.target.closest('.lang-dd-item');
        if (!item) return;
        setLanguage(item.getAttribute('data-lang-select'));
        closeLangMenu();
        langDDBtn.focus();
      });

      document.addEventListener('click', () => closeLangMenu());
      window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeLangMenu(); });
    }

    setLanguage(currentLang);
  </script>
</body>
</html>
